datalake {
    args=[]
    sources=[
        {
            format=AVRO
            id="raw_family_relationship"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/family_relationship"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_family_relationship"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/family_relationship"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_vital_status"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/vital_status"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_vital_status"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/vital_status"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_disease"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/disease"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_disease"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/disease"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_phenotype"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/phenotype"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_phenotype"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/phenotype"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_patient"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/patient"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_patient"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/patient"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_group"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/group"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_group"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/group"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_document_reference"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/document_reference"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_document_reference"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/document_reference"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_research_study"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/research_study"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_research_study"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/research_study"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_research_subject"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/research_subject"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_research_subject"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/research_subject"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_specimen"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/fhir/specimen"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_specimen"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/specimen"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=AVRO
            id="raw_organization"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "release_id"
            ]
            path="/fhir/organization"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_organization"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "release_id"
            ]
            path="/normalized/organization"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_sequencing_experiment"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/sequencing_experiment"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_sequencing_experiment_genomic_file"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/sequencing_experiment_genomic_file"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=DELTA
            id="normalized_sequencing_center"
            keys=[]
            loadtype=OverWritePartition
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/normalized/sequencing_center"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                overwriteSchema="true"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=JSON
            id="hpo_terms"
            keys=[]
            loadtype=OverWrite
            partitionby=[]
            path="/hpo_terms"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=JSON
            id="mondo_terms"
            keys=[]
            loadtype=OverWrite
            partitionby=[]
            path="/mondo_terms"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=PARQUET
            id="simple_participant"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/es_index/fhir/simple_participant"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=PARQUET
            id="es_index_study_centric"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/es_index/fhir/study_centric"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=PARQUET
            id="es_index_participant_centric"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/es_index/fhir/participant_centric"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=PARQUET
            id="es_index_file_centric"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/es_index/fhir/file_centric"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        },
        {
            format=PARQUET
            id="es_index_biospecimen_centric"
            keys=[]
            loadtype=OverWrite
            partitionby=[
                "study_id",
                "release_id"
            ]
            path="/es_index/fhir/biospecimen_centric"
            readoptions {}
            storageid=storage
            writeoptions {
                "created_on_column"="created_on"
                "is_current_column"="is_current"
                "updated_on_column"="updated_on"
                "valid_from_column"="valid_from"
                "valid_to_column"="valid_to"
            }
        }
    ]
    sparkconf {
        "spark.databricks.delta.merge.repartitionBeforeWrite.enabled"="true"
        "spark.databricks.delta.retentionDurationCheck.enabled"="false"
        "spark.databricks.delta.schema.autoMerge.enabled"="true"
        "spark.delta.merge.repartitionBeforeWrite"="true"
        "spark.fhir.server.url"="http://10.90.172.42:443"
        "spark.hadoop.fs.s3a.multiobjectdelete.enable"="false"
        "spark.sql.catalog.spark_catalog"="org.apache.spark.sql.delta.catalog.DeltaCatalog"
        "spark.sql.extensions"="io.delta.sql.DeltaSparkSessionExtension"
        "spark.sql.legacy.parquet.datetimeRebaseModeInWrite"=CORRECTED
        "spark.sql.legacy.timeParserPolicy"=CORRECTED
        "spark.sql.mapKeyDedupPolicy"="LAST_WIN"
    }
    storages=[
        {
            filesystem=S3
            id=storage
            path="s3a://d3b-portal-65-4-r-us-west-2.sec.ucsf.edu"
        }
    ]
}
"dataservice_url"=""
excludeSpecimenCollection="true"
